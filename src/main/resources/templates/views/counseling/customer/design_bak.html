<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/defaultLayout :: setContent(~{this::content})}">
    <th:block th:fragment="content">
        <!-- 공통 css-->
        <link rel="stylesheet" th:href="@{/css/header.css}">
        <link rel="stylesheet" th:href="@{/css/common.css}">

        <!-- 개별 css -->
        <link rel="stylesheet" th:href="@{/css/design.css}">

        <div class="section_wrap mb-20px">
            <div class="design_choice_wrap">

                <ul class="designTabs flex">
                </ul>

                <div id="tab-1" class="design-tab-content">
                    <!-- 2차 탭 -->
                    <ul class="sub-tabs">
                        <li class="sub-tab-link current" data-subtab="subtab-1-1">Button Style</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-2">Front Pocket</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-3">Lapel Design</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-4">Vent</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-5">Chest Pocket</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-6">Sleeve Design</li>
                        <li class="sub-tab-link" data-subtab="subtab-1-7">Lining</li>

                    </ul>
                    <div id="subtab-1-1" class="sub-tab-content current">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Button Style1</span>
                                    <div class="img-frame">
                                        <img th:src="@{/images/design/jacket/buttonStyle1.png}">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Button Style2</span>
                                    <div class="img-frame">
                                        <img th:src="@{/images/design/jacket/buttonStyle2.png}">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Button Style3</span>
                                    <div class="img-frame">
                                        <img th:src="@{/images/design/jacket/buttonStyle3.png}">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Button Style4</span>
                                    <div class="img-frame">
                                        <img th:src="@{/images/design/jacket/buttonStyle1.png}">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Button Style5</span>
                                    <div class="img-frame">
                                        <img th:src="@{/images/design/jacket/buttonStyle2.png}">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">button style1</option>
                                    <option value="">button style2</option>
                                    <option value="">button style3</option>
                                    <option value="">button style4</option>
                                    <option value="">button style5</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-2" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Front Pocket1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Front Pocket2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Front Pocket1</option>
                                    <option value="">Front Pocket2</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-3" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Lapel Design1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Lapel Design2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Lapel Design3</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Lapel Design1</option>
                                    <option value="">Lapel Design2</option>
                                    <option value="">Lapel Design3</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-4" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Vent1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Vent2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Vent1</option>
                                    <option value="">Vent2</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-5" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Chest Pocket1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Chest Pocket2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Chest Pocket1</option>
                                    <option value="">Chest Pocket2</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-6" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Sleeve Design1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Sleeve Design2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Sleeve Design1</option>
                                    <option value="">Sleeve Design2</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-1-7" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Lining1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Lining2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Lining3</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Lining1</option>
                                    <option value="">Lining2</option>
                                    <option value="">Lining3</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
                <div id="tab-2" class="design-tab-content">
                    <!-- 2차 탭 -->
                    <ul class="sub-tabs">
                        <li class="sub-tab-link current" data-subtab="subtab-2-1">pants</li>
                        <li class="sub-tab-link" data-subtab="subtab-2-2">pants</li>
                        <li class="sub-tab-link" data-subtab="subtab-2-3">pants</li>
                        <li class="sub-tab-link" data-subtab="subtab-2-4">pants</li>
                        <li class="sub-tab-link" data-subtab="subtab-2-5">pants</li>

                    </ul>
                    <div id="subtab-2-1" class="sub-tab-content current">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-2-2" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-2-3" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-2-4" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-2-5" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">pants</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">pants</option>
                                    <option value="">pants</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
                <div id="tab-3" class="design-tab-content">
                    <!-- 2차 탭 -->
                    <ul class="sub-tabs">
                        <li class="sub-tab-link current" data-subtab="subtab-3-1">vest</li>
                        <li class="sub-tab-link" data-subtab="subtab-3-2">vest</li>
                        <li class="sub-tab-link" data-subtab="subtab-3-3">vest</li>
                    </ul>
                    <div id="subtab-3-1" class="sub-tab-content current">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">vest</option>
                                    <option value="">vest</option>
                                    <option value="">vest</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-3-2" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Front Pocket1</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Front Pocket2</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">vest</option>
                                    <option value="">vest</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-3-3" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">vest</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">vest</option>
                                    <option value="">vest</option>
                                    <option value="">vest</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
                <div id="tab-4" class="design-tab-content">
                    <!-- 2차 탭 -->
                    <ul class="sub-tabs">
                        <li class="sub-tab-link current" data-subtab="subtab-4-1">Coat</li>
                        <li class="sub-tab-link" data-subtab="subtab-4-2">Coat</li>
                    </ul>
                    <div id="subtab-4-1" class="sub-tab-content current">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Coat</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Coat</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Coat</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Coat</option>
                                    <option value="">Coat</option>
                                    <option value="">Coat</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div id="subtab-4-2" class="sub-tab-content">
                        <form action="">
                            <div class="flex img-frame-wrap">
                                <div class="article-img-frame">
                                    <span class="img-title">Coat</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                                <div class="article-img-frame">
                                    <span class="img-title">Coat</span>
                                    <div class="img-frame">
                                    </div>
                                </div>
                            </div>

                            <div class="flex align-center between lastSelect">
                                <select name="" id="">
                                    <option value="">Coat</option>
                                    <option value="">Coat</option>
                                </select>
                                <div class="">
                                    <button class="btnColor_1 btn_3">저장</button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>

        </div>
    </th:block>
</th:block>

<script th:inline="javascript">
    const counselingData = [[${session.counseling}]];

    $(document).ready(function () {
        renderPartsTab();
    });

    function renderPartsTab() {
        let tabs = ''
        if (counselingData.jacket) {
            tabs += '<li class="tab-link" data-tab="tab-1">Jacket</li>';
        }

        if (counselingData.pants) {
            tabs += '<li class="tab-link" data-tab="tab-2">Pants</li>';
        }

        if (counselingData.vest) {
            tabs += '<li class="tab-link" data-tab="tab-3">Vest</li>';
        }

        if (counselingData.coat) {
            tabs += '<li class="tab-link" data-tab="tab-4">Coat</li>';
        }

        console.log(tabs);
        $('.designTabs').append(tabs);
    }
</script>

<!-- tab script -->
<script>
    $(document).ready(function(){

        $('.designTabs li').click(function(){
            var tab_id = $(this).attr('data-tab');

            $('.designTabs li').removeClass('current');
            $('.design-tab-content').removeClass('current');

            $(this).addClass('current');
            $("#"+tab_id).addClass('current');
        })

        // 2차 서브 탭
        $('.design_choice_wrap').on('click', '.sub-tab-link', function() {
            var subtab_id = $(this).attr('data-subtab');
            var $container = $(this).closest('.design-tab-content');

            $container.find('.sub-tab-link').removeClass('current');
            $container.find('.sub-tab-content').removeClass('current');

            $(this).addClass('current');
            $container.find('#' + subtab_id).addClass('current');
        });

    })

    window.addEventListener('beforeunload', function () {
        showLoadingImage();
        callService(
            "POST"
            , "/counseling/design/save"
            , JSON.stringify(convertFormToJSON($('#dataForm')))
            , function (response) {
                if (!response.success) {
                    alert('데이터 저장에 실패하였습니다.');
                    console.log(response.message);
                }
            }
        );
    });
</script>

</html>
